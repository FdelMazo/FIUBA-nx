
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Grafazo: Con que alumnos puedo hacer TPs en un futuro? &#8212; FIUBA-nx</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Grafón: Qué electivas me conviene cursar?" href="grafon.html" />
    <link rel="prev" title="Infra" href="infra.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">FIUBA-nx</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    FIUBA-nx
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="infra.html">
   Infra
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Grafazo: Con que alumnos puedo hacer TPs en un futuro?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="grafon.html">
   Grafón: Qué electivas me conviene cursar?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="graphito.html">
   Graphito
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/FdelMazo/FIUBA-nx/master?urlpath=tree/grafazo.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/FdelMazo/FIUBA-nx"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/FdelMazo/FIUBA-nx/issues/new?title=Issue%20on%20page%20%2Fgrafazo.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/grafazo.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Grafazo: Con que alumnos puedo hacer TPs en un futuro?
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#como-es-el-grafo">
     Cómo es el grafo?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#homofilia">
   Homofilia
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#valores-esperados">
     Valores esperados
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#valores-encontrados">
     Valores encontrados
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comunidades">
     Comunidades
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evaluacion-de-comunidades-por-generacion">
       Evaluación de comunidades por “generación”
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#materias-y-cuatrimestres-en-comun">
       Materias y cuatrimestres en común
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alumnos-similares-dentro-de-la-misma-camada">
     Alumnos similares dentro de la misma camada
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Grafazo: Con que alumnos puedo hacer TPs en un futuro?</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Grafazo: Con que alumnos puedo hacer TPs en un futuro?
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#como-es-el-grafo">
     Cómo es el grafo?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#homofilia">
   Homofilia
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#valores-esperados">
     Valores esperados
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#valores-encontrados">
     Valores encontrados
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comunidades">
     Comunidades
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#evaluacion-de-comunidades-por-generacion">
       Evaluación de comunidades por “generación”
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#materias-y-cuatrimestres-en-comun">
       Materias y cuatrimestres en común
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alumnos-similares-dentro-de-la-misma-camada">
     Alumnos similares dentro de la misma camada
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="grafazo-con-que-alumnos-puedo-hacer-tps-en-un-futuro">
<h1>Grafazo: Con que alumnos puedo hacer TPs en un futuro?<a class="headerlink" href="#grafazo-con-que-alumnos-puedo-hacer-tps-en-un-futuro" title="Permalink to this headline">#</a></h1>
<p>Este grafo se encarga de analizar “camadas” de gente: grupos de alumnos que cursaron varias materias juntos.</p>
<p>Una vez que podamos distinguir esas camadas, ya tenemos posibles compañeros de TPs. Después, dentro de mi propia camada, con quien más quiero hacer un TP es con los alumnos que se parezcan a mí académicamente. Entonces tenemos que pasar a tener en cuenta la nota de las materias. La idea final es que yo me haga compañero de alumnos que tiendan a cursar las mismas materias que yo, y que tengamos el mismo nivel académico.</p>
<p>Ojo, este grafo no apunta a responder <em>en que</em> materia hacer tps juntos: eso involucraría fijarse qué curso cada alumno y fijarse que personas todavía no cursaron lo mismo. Ya con solo ser de la misma camada sabemos que nos quedan materias en las que nos vamos a cruzar. La idea es un poco mas generalizada a encontrar compañeros de clase, no importa en que materia.</p>
<p>Por ejemplo: como Rosita y yo cursamos las mismas materias por dos años, somos de la misma camada. Y encima, como siempre nos sacamos notas parecidas, debe ser un buen compañero de TP para mí.</p>
<section id="como-es-el-grafo">
<h2>Cómo es el grafo?<a class="headerlink" href="#como-es-el-grafo" title="Permalink to this headline">#</a></h2>
<p>El grafo analizado va a ser un multigrafo: entre cada par de alumnos puede haber varias aristas</p>
<ul class="simple">
<li><p>Nodos: alumnos</p></li>
<li><p>Aristas: conectar dos alumnos que hayan cursado la misma materia el mismo cuatrimestre</p></li>
<li><p>Peso de las aristas: la relacion entre las notas de esa cursada. Mientras más parecidos somos, más cercano estamos, y por ende menor peso hay en nuestra arista. Lo calculamos como la diferencia entre las notas.</p>
<ul>
<li><p>Si me saque un 10 y vos un 10, nuestro peso es 0.</p></li>
<li><p>Si me saque un 4 y vos un 10, nuestro peso es 6.</p></li>
<li><p>En el caso de que yo estoy en final y vos aprobaste, hardcodeamos el peso a 7</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;fiuba-map-data.pickle&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Padron</th>
      <th>Carrera</th>
      <th>Orientacion</th>
      <th>Final de Carrera</th>
      <th>materia_id</th>
      <th>materia_nota</th>
      <th>materia_cuatrimestre</th>
      <th>aplazos</th>
      <th>optativas</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1622</th>
      <td>102896</td>
      <td>informatica</td>
      <td>Gestión Industrial de Sistemas</td>
      <td>tpp</td>
      <td>75.42</td>
      <td>-2.0</td>
      <td>2023.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10690</th>
      <td>109418</td>
      <td>informatica</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>61.08</td>
      <td>-2.0</td>
      <td>2022.5</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1586</th>
      <td>107536</td>
      <td>informatica</td>
      <td>Sistemas Distribuidos</td>
      <td>tpp</td>
      <td>75.40</td>
      <td>8.0</td>
      <td>2021.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">corrnotas</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;src_nota&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;dst_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">or</span>
        <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;dst_nota&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;src_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)):</span>
        <span class="k">return</span> <span class="mi">7</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;src_nota&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;dst_nota&#39;</span><span class="p">])</span>

<span class="n">df_nodes_metadata</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s2">&quot;Padron&quot;</span><span class="p">,</span> <span class="s2">&quot;Carrera&quot;</span><span class="p">,</span> <span class="s2">&quot;aplazos&quot;</span><span class="p">,</span> <span class="s2">&quot;optativas&quot;</span><span class="p">,</span> <span class="s2">&quot;checkboxes&quot;</span><span class="p">]]</span>
<span class="n">df_nodes_metadata</span> <span class="o">=</span> <span class="n">df_nodes_metadata</span><span class="p">[</span><span class="n">df_nodes_metadata</span><span class="p">[</span><span class="s2">&quot;aplazos&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span> <span class="o">|</span> <span class="n">df_nodes_metadata</span><span class="p">[</span><span class="s2">&quot;optativas&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
<span class="n">df_nodes_metadata</span> <span class="o">=</span> <span class="n">df_nodes_metadata</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;Padron&quot;</span><span class="p">,</span> <span class="s2">&quot;Carrera&quot;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="n">df_nodes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;Padron&quot;</span><span class="p">,</span> <span class="s2">&quot;Carrera&quot;</span><span class="p">,</span> <span class="s2">&quot;Orientacion&quot;</span><span class="p">,</span> <span class="s2">&quot;Final de Carrera&quot;</span><span class="p">]]</span>
<span class="n">df_nodes</span> <span class="o">=</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<span class="n">df_nodes</span> <span class="o">=</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_nodes_metadata</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span>
<span class="n">df_nodes</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;Padron&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_nodes</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>
<span class="n">df_edges</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;materia_cuatrimestre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>
     <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;materia_id&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_cuatrimestre&#39;</span><span class="p">])[[</span><span class="s1">&#39;Padron&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_nota&#39;</span><span class="p">]]</span>
     <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>
     <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
     <span class="o">.</span><span class="n">stack</span><span class="p">()</span>
     <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Usuarios&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">df_edges</span> <span class="o">=</span> <span class="n">df_edges</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_edges</span><span class="p">[[</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="s1">&#39;dst&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;Usuarios&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">df_edges</span><span class="p">[[</span><span class="s1">&#39;src_padron&#39;</span><span class="p">,</span> <span class="s1">&#39;src_nota&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">df_edges</span><span class="p">[[</span><span class="s1">&#39;dst_padron&#39;</span><span class="p">,</span> <span class="s1">&#39;dst_nota&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;dst&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Nos quedamos solo con las materias aprobadas (nota &gt; 0) o en final (-1)</span>
<span class="n">df_edges</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[(</span><span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;src_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;src_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)]</span>
<span class="n">df_edges</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[(</span><span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;dst_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;dst_nota&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)]</span>

<span class="c1"># Calculamos la correlacion entre las notas</span>
<span class="n">df_edges</span><span class="p">[</span><span class="s1">&#39;corrnotas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_edges</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">corrnotas</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">df_edges</span> <span class="o">=</span> <span class="n">df_edges</span><span class="p">[[</span><span class="s1">&#39;src_padron&#39;</span><span class="p">,</span> <span class="s1">&#39;dst_padron&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_cuatrimestre&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_id&#39;</span><span class="p">,</span> <span class="s1">&#39;src_nota&#39;</span><span class="p">,</span> <span class="s1">&#39;dst_nota&#39;</span><span class="p">,</span> <span class="s1">&#39;corrnotas&#39;</span><span class="p">]]</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_edges</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1804/614348558.py:7: FutureWarning: Index.__and__ operating as a set operation is deprecated, in the future this will be a logical operation matching Series.__and__.  Use index.intersection(other) instead.
  df_nodes_metadata = df[df.columns &amp; [&quot;Padron&quot;, &quot;Carrera&quot;, &quot;aplazos&quot;, &quot;optativas&quot;, &quot;checkboxes&quot;]]
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Carrera</th>
      <th>Orientacion</th>
      <th>Final de Carrera</th>
      <th>aplazos</th>
      <th>optativas</th>
    </tr>
    <tr>
      <th>Padron</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>106032</th>
      <td>informatica</td>
      <td>Gestión Industrial de Sistemas</td>
      <td>tpp</td>
      <td>1.0</td>
      <td>[{'id': 1, 'nombre': 'Materia Optativa', 'cred...</td>
    </tr>
    <tr>
      <th>101508</th>
      <td>informatica</td>
      <td>Sistemas Distribuidos</td>
      <td>tpp</td>
      <td>3.0</td>
      <td>[{'id': 1, 'nombre': 'Materia Optativa', 'cred...</td>
    </tr>
    <tr>
      <th>100029</th>
      <td>informatica</td>
      <td>Sistemas Distribuidos</td>
      <td>tpp</td>
      <td>2.0</td>
      <td>[{'id': 1, 'nombre': '[75.27] Algoritmos y Pro...</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1804/614348558.py:21: FutureWarning: The default dtype for empty Series will be &#39;object&#39; instead of &#39;float64&#39; in a future version. Specify a dtype explicitly to silence this warning.
  .apply(pd.Series)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>src_padron</th>
      <th>dst_padron</th>
      <th>materia_cuatrimestre</th>
      <th>materia_id</th>
      <th>src_nota</th>
      <th>dst_nota</th>
      <th>corrnotas</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3090</th>
      <td>105964</td>
      <td>104728</td>
      <td>2020.0</td>
      <td>61.03</td>
      <td>8.0</td>
      <td>5.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>101778</th>
      <td>103735</td>
      <td>93639</td>
      <td>2019.0</td>
      <td>75.40</td>
      <td>9.0</td>
      <td>7.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>56407</th>
      <td>105525</td>
      <td>104077</td>
      <td>2021.5</td>
      <td>75.06</td>
      <td>6.0</td>
      <td>7.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">utils</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_pandas_edgelist</span><span class="p">(</span><span class="n">df_edges</span><span class="p">,</span> 
                            <span class="n">source</span><span class="o">=</span><span class="s1">&#39;src_padron&#39;</span><span class="p">,</span> 
                            <span class="n">target</span><span class="o">=</span><span class="s1">&#39;dst_padron&#39;</span><span class="p">,</span> 
                            <span class="n">edge_attr</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;materia_id&#39;</span><span class="p">,</span><span class="s1">&#39;materia_cuatrimestre&#39;</span><span class="p">,</span> <span class="s1">&#39;corrnotas&#39;</span><span class="p">],</span> 
                            <span class="n">create_using</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">MultiGraph</span><span class="p">())</span>

<span class="n">nx</span><span class="o">.</span><span class="n">set_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">df_nodes</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  El diámetro de la red: </span><span class="si">{</span><span class="n">nx</span><span class="o">.</span><span class="n">diameter</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="si">}</span><span class="s2"></span>
<span class="s2">  El grado promedio de la red: </span><span class="si">{</span><span class="nb">sum</span><span class="p">([</span><span class="n">n</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="o">.</span><span class="n">degree</span><span class="p">()])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"></span>
<span class="s2">  Puentes globales: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">bridges</span><span class="p">(</span><span class="n">G</span><span class="p">))</span><span class="si">}</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">circular_layout</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">node_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">utils</span><span class="o">.</span><span class="n">plot_diametro</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MultiGraph with 378 nodes and 75761 edges
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  El diámetro de la red: 5
  El grado promedio de la red: 400.85
  Puentes globales: [(&#39;100866&#39;, &#39;99796&#39;), (&#39;98600&#39;, &#39;109670&#39;)]
</pre></div>
</div>
<img alt="_images/grafazo_4_2.png" src="_images/grafazo_4_2.png" />
</div>
</div>
<p>El diámetro de la red es 4, y tiene mucho sentido que sea un número tan chico porque el fiubamap tiene cargadas las notas de alumnos desde el 2014 en adelante (aproximadamente), así que no hay tantas camadas de alumnos, sumado a que estamos filtrando por una carrera. Además de esto, los alumnos avanzan en la carrera a diferentes velocidades, por lo que hay recursantes que cursan con varias camadas. Teniendo en cuenta estos tres factores, hace que la mayoría de los nodos en el grafo están muy conectados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ToDo: graficar un sample con esto!</span>

<span class="c1"># # Solo como demo para cuando tenemos pocos nodos: ahora veamos el grafo, pero dibujemos todas las aristas</span>
<span class="c1"># # Robadisimo de: https://stackoverflow.com/a/60638452</span>
<span class="c1"># pos = nx.random_layout(G)</span>
<span class="c1"># nx.draw_networkx_nodes(G, pos)</span>
<span class="c1"># ax = plt.gca()</span>
<span class="c1"># for e in G.edges:</span>
<span class="c1">#     ax.annotate(&quot;&quot;,</span>
<span class="c1">#                 xy=pos[e[0]], xycoords=&#39;data&#39;,</span>
<span class="c1">#                 xytext=pos[e[1]], textcoords=&#39;data&#39;,</span>
<span class="c1">#                 arrowprops=dict(arrowstyle=&quot;-&quot;, color=&quot;0.5&quot;,</span>
<span class="c1">#                                 connectionstyle=&quot;arc3,rad=rr&quot;.replace(&#39;rr&#39;,str(0.3*e[2]))),</span>
<span class="c1">#                 )</span>
<span class="c1"># plt.axis(&#39;off&#39;)</span>
<span class="c1"># plt.show()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="homofilia">
<h1>Homofilia<a class="headerlink" href="#homofilia" title="Permalink to this headline">#</a></h1>
<blockquote>
<div><p>La homofilia nos explica otra forma en la que los vínculos se forman. Esto puede depender de diferentes características, por ejemplo podemos unir personas por género, edad, nacionalidad, intereses, creencias</p>
</div></blockquote>
<p>Cuando pensamos en personas en la vida cotidiana y cómo estas podrían vincularse, lo más natural es pensar en edad, intereses, ideología, etc. Cuando pensamos en alumnos de una universidad a lo largo de su carrera, no siempre eso es lo que une a la gente. La edad capaz ya no es un factor central, ya que desde la primera materia de cualquier carrera podemos encontrar personas recién salidas del secundario, como gente de mediana y alta edad. Cuando nos encontramos buscando una característica que vincule a los alumnos, lo primero que pensamos es en las <strong>camadas</strong>, aquellas personas con las que tendes a cursar más materias.</p>
<p>Para realizar este análisis vamos a dividir al alumnado en 4 camadas. La camada número 1 estará compuesta por aquellos padrones que comienzan con 100 o inferiores. Las siguientes camadas son desde los padrones 101 a 104; de 105 a 109;y de 110 a 120(siendo esta bastante chica por ahora).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_camadas</span> <span class="o">=</span> <span class="n">df_edges</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># ToDo: Preferimos hacerlo con quantiles? Al tratarse de homofilia siento que esta bien por rangos pero como quieran</span>
<span class="k">def</span> <span class="nf">definir_camada</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span><span class="mi">999</span><span class="p">)</span> <span class="ow">or</span> <span class="n">f</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">105</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">105</span><span class="p">,</span> <span class="mi">110</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">3</span>
    <span class="k">if</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">4</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;src_camada&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">definir_camada</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">src_padron</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> 
<span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;dst_camada&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">definir_camada</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">dst_padron</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_camadas</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="p">[</span><span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;src_camada&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">df_camadas</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="p">[</span><span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;dst_camada&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">df_camadas</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>src_padron</th>
      <th>dst_padron</th>
      <th>materia_cuatrimestre</th>
      <th>materia_id</th>
      <th>src_nota</th>
      <th>dst_nota</th>
      <th>corrnotas</th>
      <th>src_camada</th>
      <th>dst_camada</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>43477</th>
      <td>103775</td>
      <td>100972</td>
      <td>2022.0</td>
      <td>71.14</td>
      <td>10.0</td>
      <td>7.0</td>
      <td>3.0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>63618</th>
      <td>106440</td>
      <td>104697I</td>
      <td>2021.0</td>
      <td>75.07</td>
      <td>8.0</td>
      <td>-1.0</td>
      <td>7.0</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>56005</th>
      <td>105558</td>
      <td>106056</td>
      <td>2021.5</td>
      <td>75.06</td>
      <td>-1.0</td>
      <td>10.0</td>
      <td>7.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>87735</th>
      <td>105558</td>
      <td>105771</td>
      <td>2021.0</td>
      <td>75.12</td>
      <td>-1.0</td>
      <td>8.0</td>
      <td>7.0</td>
      <td>3</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="valores-esperados">
<h2>Valores esperados<a class="headerlink" href="#valores-esperados" title="Permalink to this headline">#</a></h2>
<div class="math notranslate nohighlight">
\[\mathbb{P}(CamadaX) = \frac{\text{# nodos de Camada X}}{\text{# nodos totales}}\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(pCamada1 = \frac{15064}{53534} = 0,281 \)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(pCamada2 = \frac{19242}{53534} = 0,359 \)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(pCamada3 = \frac{18690}{53534} = 0,349 \)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(pCamada4 = \frac{538}{53534} = 0,01 \)</span></p></li>
</ul>
<p>Por lo que la probabilidad de ser de la camada 1 y compartir con alguien de la camada 1 es <span class="math notranslate nohighlight">\(pCamada1^2\)</span>, mientras que cruzarse entre camadas te da una probabilidad de <span class="math notranslate nohighlight">\(pCamada1*pCamada2*2\)</span></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Camada 1</p></th>
<th class="head"><p>Camada 2</p></th>
<th class="head"><p>Camada 3</p></th>
<th class="head"><p>Camada 4</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Camada 1</p></td>
<td><p>0,078</p></td>
<td><p>0,1</p></td>
<td><p>0,098</p></td>
<td><p>0,003</p></td>
</tr>
<tr class="row-odd"><td><p>Camada 2</p></td>
<td><p>0,1</p></td>
<td><p>0,129</p></td>
<td><p>0,125</p></td>
<td><p>0,0035</p></td>
</tr>
<tr class="row-even"><td><p>Camada 3</p></td>
<td><p>0,098</p></td>
<td><p>0,125</p></td>
<td><p>0,122</p></td>
<td><p>0,0034</p></td>
</tr>
<tr class="row-odd"><td><p>Camada 4</p></td>
<td><p>0,003</p></td>
<td><p>0,0035</p></td>
<td><p>0,0034</p></td>
<td><p>0.0001</p></td>
</tr>
</tbody>
</table>
</section>
<section id="valores-encontrados">
<h2>Valores encontrados<a class="headerlink" href="#valores-encontrados" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_camadas</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;src_camada&#39;</span><span class="p">,</span> <span class="s1">&#39;dst_camada&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()[[</span><span class="s2">&quot;src_padron&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;src_padron&#39;</span><span class="p">:</span><span class="s1">&#39;Count&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Count</th>
    </tr>
    <tr>
      <th>src_camada</th>
      <th>dst_camada</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">1</th>
      <th>1</th>
      <td>8034</td>
    </tr>
    <tr>
      <th>2</th>
      <td>6494</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1451</td>
    </tr>
    <tr>
      <th>4</th>
      <td>19</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">2</th>
      <th>1</th>
      <td>8283</td>
    </tr>
    <tr>
      <th>2</th>
      <td>16492</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4269</td>
    </tr>
    <tr>
      <th>4</th>
      <td>116</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">3</th>
      <th>1</th>
      <td>1683</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7759</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12923</td>
    </tr>
    <tr>
      <th>4</th>
      <td>25</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">4</th>
      <th>1</th>
      <td>144</td>
    </tr>
    <tr>
      <th>2</th>
      <td>470</td>
    </tr>
    <tr>
      <th>3</th>
      <td>59</td>
    </tr>
    <tr>
      <th>4</th>
      <td>9</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_temp</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;src_padron&#39;</span><span class="p">)</span>
<span class="n">total_nodos</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df_prob</span> <span class="o">=</span> <span class="n">df_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;src_camada&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()[[</span><span class="s2">&quot;src_padron&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">total_nodos</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;src_padron&#39;</span><span class="p">:</span><span class="s1">&#39;P(misma camada)&#39;</span><span class="p">})</span>
<span class="n">df_prob</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>P(misma camada)</th>
    </tr>
    <tr>
      <th>src_camada</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.037281</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.129766</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.186863</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.000208</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">probabilidad_intercamada</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">df_prob</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;Considerando 4 camadas, el threshold teórico que calculamos para de arista entre dos alumnos de distintas camadas es de </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">probabilidad_intercamada</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Considerando 4 camadas, el threshold teórico que calculamos para de arista entre dos alumnos de distintas camadas es de 0.65
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_prob_aristas</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="p">[</span><span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;src_camada&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">df_camadas</span><span class="p">[</span><span class="s1">&#39;dst_camada&#39;</span><span class="p">]]</span>
<span class="n">aristas_intercamadas</span> <span class="o">=</span> <span class="n">df_prob_aristas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">aristas_totales</span> <span class="o">=</span> <span class="n">df_camadas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">probabilidad_intercamada_experimental</span> <span class="o">=</span> <span class="n">aristas_intercamadas</span> <span class="o">/</span> <span class="n">aristas_totales</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;Proporción existente de &quot;sin homofilia&quot;: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">probabilidad_intercamada_experimental</span><span class="o">/</span><span class="n">probabilidad_intercamada</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">%&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Proporción existente de &quot;sin homofilia&quot;: 69.83%
</pre></div>
</div>
</div>
</div>
<p>Esta proporción resulta alta en relación a lo que obtuvimos teóricamente, y creemos que se debe a que planteamos camadas muy grandes, que en la práctica deberían subdividirse en más camadas, y por lo tanto, resulta más difícil que haya tanta conexión entre camadas.</p>
</section>
<section id="comunidades">
<h2>Comunidades<a class="headerlink" href="#comunidades" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">networkx.algorithms</span> <span class="kn">import</span> <span class="n">community</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># La primera corrida solo calculamos camadas, sin darle peso a las notas. Pasamos `weight=None` a louvain</span>
<span class="n">louvain</span> <span class="o">=</span> <span class="n">community</span><span class="o">.</span><span class="n">louvain_communities</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">draw_nodes</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mcolors</span><span class="o">.</span><span class="n">CSS4_COLORS</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">louvain</span><span class="p">))</span>
<span class="k">for</span> <span class="n">louvaincommunity</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">louvain</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
    <span class="n">draw_nodes</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">n</span><span class="p">:</span> <span class="n">color</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">louvaincommunity</span><span class="p">})</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">louvain</span><span class="p">)</span><span class="si">}</span><span class="s2"> Louvain Communities&quot;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> 
                 <span class="n">nodelist</span><span class="o">=</span><span class="n">draw_nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> 
                 <span class="n">node_color</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">draw_nodes</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> 
                 <span class="n">width</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> 
                 <span class="n">pos</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">kamada_kawai_layout</span><span class="p">(</span><span class="n">G</span><span class="p">),</span>
                 <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/grafazo_17_0.png" src="_images/grafazo_17_0.png" />
</div>
</div>
<section id="evaluacion-de-comunidades-por-generacion">
<h3>Evaluación de comunidades por “generación”<a class="headerlink" href="#evaluacion-de-comunidades-por-generacion" title="Permalink to this headline">#</a></h3>
<p>Ahora que ya calculamos nuestras comunidades tenemos que confirmar. Efectivamente se refieren a distintas camadas de alumnos? Alumnos que ingresaron a la facultad al mismo tiempo, por ejemplo?</p>
<p>¿Existe correlación entre la distribución de padrones y la comunidad? De tal forma que las comunidades sean por camadas o “generacionales”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">louvain_padrones</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">comunidad</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">louvain</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">padron</span> <span class="ow">in</span> <span class="n">comunidad</span><span class="p">:</span>
        <span class="n">louvain_padrones</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">padron</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
<span class="n">df_comunidades</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">louvain_padrones</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">,</span> <span class="s2">&quot;comunidad&quot;</span><span class="p">])</span>

<span class="c1"># len patch for overflow</span>
<span class="n">df_temp</span> <span class="o">=</span> <span class="n">df_comunidades</span><span class="p">[(</span><span class="n">df_comunidades</span><span class="p">[</span><span class="s1">&#39;padron&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_comunidades</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_comunidades</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># remove outliers by percentiles, stolen from https://stackoverflow.com/a/59366409</span>
<span class="n">Q1</span> <span class="o">=</span> <span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.10</span><span class="p">)</span>
<span class="n">Q3</span> <span class="o">=</span> <span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.90</span><span class="p">)</span>
<span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>
<span class="n">df_comunidades</span> <span class="o">=</span> <span class="n">df_temp</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span><span class="p">))</span> <span class="o">|</span><span class="p">(</span><span class="n">df_temp</span><span class="p">[</span><span class="s2">&quot;padron&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span><span class="p">)))]</span>

<span class="n">display</span><span class="p">(</span><span class="n">df_comunidades</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">df_comunidades</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;comunidad&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;padron&#39;</span><span class="p">:[</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">,</span><span class="s1">&#39;count&#39;</span><span class="p">]}))</span>

<span class="c1"># TODO: play with the &quot;stat&quot; parameter. another interesting one is the &quot;density&quot; parameter</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
    <span class="n">df_comunidades</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;padron&quot;</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">&quot;comunidad&quot;</span><span class="p">,</span>
    <span class="n">element</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span>
    <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="n">common_norm</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>padron</th>
      <th>comunidad</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>151</th>
      <td>104196</td>
      <td>1</td>
    </tr>
    <tr>
      <th>87</th>
      <td>101456</td>
      <td>1</td>
    </tr>
    <tr>
      <th>288</th>
      <td>109374</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">padron</th>
    </tr>
    <tr>
      <th></th>
      <th>mean</th>
      <th>std</th>
      <th>count</th>
    </tr>
    <tr>
      <th>comunidad</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>99896.229508</td>
      <td>2816.161935</td>
      <td>61</td>
    </tr>
    <tr>
      <th>1</th>
      <td>102371.739583</td>
      <td>3124.528482</td>
      <td>96</td>
    </tr>
    <tr>
      <th>2</th>
      <td>104326.104478</td>
      <td>2485.639599</td>
      <td>67</td>
    </tr>
    <tr>
      <th>3</th>
      <td>106842.222222</td>
      <td>2760.319604</td>
      <td>126</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="_images/grafazo_19_2.png" src="_images/grafazo_19_2.png" />
</div>
</div>
<p>Se puede observar una mínima correlación considerando el intervalo más frecuente de cada comunidad. Esto coincide con lo que se planteo con el concepto de homofilia.</p>
</section>
<section id="materias-y-cuatrimestres-en-comun">
<h3>Materias y cuatrimestres en común<a class="headerlink" href="#materias-y-cuatrimestres-en-comun" title="Permalink to this headline">#</a></h3>
<p>Se puede aproximar a una mejor noción de <em>camada</em> que simplemente tomando el padrón, tomando el conjunto de materias/cuatrimestre más populares por comunidad.</p>
<ul class="simple">
<li><p>todo: explicar esto</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df_comunidades</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;padron&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;padron&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">df_src</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_edges</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;src_padron&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;padron&#39;</span><span class="p">)</span>
<span class="n">df_dst</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_edges</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;dst_padron&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;padron&#39;</span><span class="p">)</span>
<span class="p">(</span>
    <span class="n">pd</span>
        <span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_src</span><span class="p">,</span> <span class="n">df_dst</span><span class="p">])</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;comunidad&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_cuatrimestre&#39;</span><span class="p">,</span> <span class="s1">&#39;materia_id&#39;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;src_padron&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;comunidad&#39;</span><span class="p">)</span>   <span class="c1"># obtener top 3 materias/cuatrimestres por comunidad</span>
        <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;comunidad&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>comunidad</th>
      <th>materia_cuatrimestre</th>
      <th>materia_id</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>18</th>
      <td>0</td>
      <td>2020.0</td>
      <td>75.08</td>
      <td>1804</td>
    </tr>
    <tr>
      <th>17</th>
      <td>0</td>
      <td>2020.5</td>
      <td>75.09</td>
      <td>1845</td>
    </tr>
    <tr>
      <th>15</th>
      <td>0</td>
      <td>2020.0</td>
      <td>75.42</td>
      <td>1848</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1</td>
      <td>2019.5</td>
      <td>61.08</td>
      <td>2499</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1</td>
      <td>2019.0</td>
      <td>75.40</td>
      <td>2600</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>2019.0</td>
      <td>62.01</td>
      <td>2860</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2020.0</td>
      <td>61.03</td>
      <td>3477</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2020.5</td>
      <td>75.41</td>
      <td>3780</td>
    </tr>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>2020.0</td>
      <td>75.40</td>
      <td>4288</td>
    </tr>
    <tr>
      <th>37</th>
      <td>3</td>
      <td>2022.0</td>
      <td>75.07</td>
      <td>1258</td>
    </tr>
    <tr>
      <th>24</th>
      <td>3</td>
      <td>2021.5</td>
      <td>75.41</td>
      <td>1748</td>
    </tr>
    <tr>
      <th>20</th>
      <td>3</td>
      <td>2021.0</td>
      <td>75.40</td>
      <td>1800</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="alumnos-similares-dentro-de-la-misma-camada">
<h2>Alumnos similares dentro de la misma camada<a class="headerlink" href="#alumnos-similares-dentro-de-la-misma-camada" title="Permalink to this headline">#</a></h2>
<p>Ahora que ya tenemos cada subgrafo de gente que cursó junta, queremos encontrar alumnos similares en sus notas. O sea, ya se que soy parte de una camada de 100 personas. De esas 100, con quien me conviene hacer un TP?</p>
<p>Entonces vamos a volver a calcular comunidades, pero esta vez teniendo en cuenta el peso de las aristas, que representan la similitud académica.</p>
<p>todo: deberiamos, de la misma forma que lo hacemos con las comunidades, confirmar que estas subcomunidades tambien se clasifican segun algo (por ejemplo, calcular el avg y std de corrnotas de cada subcomunidad y mostrar que son distintos)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setup</span> <span class="kn">import</span> <span class="n">PADRON</span>

<span class="k">def</span> <span class="nf">nestedsearch</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">lst_of_sets</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">lst</span><span class="p">:</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">,</span> <span class="n">lst_of_sets</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">armar_grupo</span><span class="p">(</span><span class="n">padron</span><span class="p">):</span>
    <span class="n">camada</span> <span class="o">=</span> <span class="n">nestedsearch</span><span class="p">(</span><span class="n">padron</span><span class="p">,</span> <span class="n">louvain</span><span class="p">)</span>       
    <span class="n">subnetwork</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">camada</span><span class="p">)</span>
    <span class="n">min_alumnos</span><span class="p">,</span> <span class="n">max_alumnos</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">14</span>
    <span class="n">max_iteraciones</span> <span class="o">=</span> <span class="mi">25</span>
    
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">grupo</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iteraciones</span><span class="p">):</span>
        <span class="n">sublouvains</span> <span class="o">=</span> <span class="n">community</span><span class="o">.</span><span class="n">louvain_communities</span><span class="p">(</span><span class="n">subnetwork</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;corrnotas&#39;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="mf">0.01</span><span class="p">))</span>
        <span class="n">comunidad</span> <span class="o">=</span> <span class="n">nestedsearch</span><span class="p">(</span><span class="n">padron</span><span class="p">,</span> <span class="n">sublouvains</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_alumnos</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">comunidad</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_alumnos</span><span class="p">:</span>
            <span class="n">grupo</span> <span class="o">=</span> <span class="n">comunidad</span>
            <span class="k">break</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">grupo</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">comunidad</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_alumnos</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">comunidad</span><span class="p">)</span> <span class="o">-</span> <span class="n">max_alumnos</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grupo</span><span class="p">)</span> <span class="o">-</span> <span class="n">max_alumnos</span><span class="p">)):</span>
            <span class="n">grupo</span> <span class="o">=</span> <span class="n">comunidad</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

    <span class="n">grupo</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">padron</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">grupo</span>

<span class="n">grupo</span> <span class="o">=</span> <span class="n">armar_grupo</span><span class="p">(</span><span class="n">PADRON</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Posibles compañeros de TP de </span><span class="si">{</span><span class="n">PADRON</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">subgraph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">grupo</span><span class="p">),</span> 
                 <span class="n">width</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> 
                 <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">grupo</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100016</td>
    </tr>
    <tr>
      <th>1</th>
      <td>102674</td>
    </tr>
    <tr>
      <th>2</th>
      <td>102342</td>
    </tr>
    <tr>
      <th>3</th>
      <td>98153</td>
    </tr>
    <tr>
      <th>4</th>
      <td>102103</td>
    </tr>
    <tr>
      <th>5</th>
      <td>103371</td>
    </tr>
    <tr>
      <th>6</th>
      <td>100445</td>
    </tr>
    <tr>
      <th>7</th>
      <td>919191</td>
    </tr>
    <tr>
      <th>8</th>
      <td>102141</td>
    </tr>
    <tr>
      <th>9</th>
      <td>102981</td>
    </tr>
    <tr>
      <th>10</th>
      <td>102654</td>
    </tr>
    <tr>
      <th>11</th>
      <td>102361</td>
    </tr>
    <tr>
      <th>12</th>
      <td>102740</td>
    </tr>
  </tbody>
</table>
</div></div><img alt="_images/grafazo_25_1.png" src="_images/grafazo_25_1.png" />
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="infra.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Infra</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="grafon.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Grafón: Qué electivas me conviene cursar?</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By FIUBA-nx<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>